{"version":3,"sources":["services/flickr.service.js","components/Photo/Photo.js","components/Search/Search.js","components/Loading/Loading.js","components/App/App.js","index.js"],"names":["API_URL","DEFAULT_PARAMS","api_key","process","safe_search","per_page","format","nojsoncallback","extras","getPhotoURL","photo","id","farm","secret","server","fetchPhotos","a","tags","params","method","axios","get","then","data","stat","photos","Error","map","item","photoURL","Photo","className","href","target","title","src","alt","Search","onSearch","inputRef","React","createRef","trigger","debounce","value","current","length","type","ref","onChange","placeholder","Loading","App","useState","setPhotos","isLoading","setIsLoading","searchPhotos","tagsParam","replace","console","log","i","key","ReactDOM","render","document","getElementById"],"mappings":"w7BAEA,IAAMA,EAAU,wCAEVC,EAAiB,CACrBC,QAASC,mCACTC,YAAa,EACbC,SAAU,GACVC,OAAQ,OACRC,eAAgB,EAChBC,OAAQ,OAGJC,EAAc,SAACC,GAAW,IAE5BC,EAIED,EAJFC,GACAC,EAGEF,EAHFE,KACAC,EAEEH,EAFFG,OACAC,EACEJ,EADFI,OAGF,MAAM,eAAN,OAAsBF,EAAtB,6BAA+CE,EAA/C,YAAyDH,EAAzD,YAA+DE,EAA/D,SAIWE,EAAW,uCAAG,0CAAAC,EAAA,6DAAOC,EAAP,+BAAc,GAIjCC,EAJmB,KAKpBjB,EALoB,CAMvBkB,OAJa,uBAKbF,SAPuB,kBAUlBG,IACJC,IAAIrB,EAAS,CAAEkB,WACfI,MAAK,YAAe,IAAZC,EAAW,EAAXA,KAEP,GAAkB,SAAdA,EAAKC,OAAoBD,EAAKE,OAChC,MAAM,IAAIC,MAAM,0BAKlB,OAFeH,EAAKE,OAAOf,OAAS,IAEtBiB,KAAI,SAACC,GAEf,OADAA,EAAKC,SAAWpB,EAAYmB,GACrBA,SAtBU,2CAAH,qDCJTE,G,MAjBD,SAAC,GAAe,IAAbpB,EAAY,EAAZA,MACf,OACE,yBAAKqB,UAAU,SAEb,yBAAKA,UAAU,kBACb,uBAAGC,KAAOtB,EAAMmB,SAAWI,OAAO,UAChC,wBAAIF,UAAU,6BAA8BrB,EAAMwB,OAAS,aAI/D,gCACE,yBAAKC,IAAMzB,EAAMmB,UAAY,kCAAoCO,IAAI,Y,iBCkB9DC,G,MA5BA,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACVC,EAAWC,IAAMC,YAOjBC,EAAUC,KALM,WAAO,IACnBC,EAAUL,EAASM,QAAnBD,MACRA,EAAME,OAAS,GAAKR,EAASM,KAGS,KAExC,OACE,yBAAKb,UAAU,kBACb,uBAAGA,UAAU,iBAAb,uBACA,yBAAKA,UAAU,SACb,yBAAKA,UAAU,WACb,2BACEA,UAAU,qBACVgB,KAAK,OACLC,IAAKT,EACLU,SAAUP,EACVQ,YAAY,+BCPTC,G,MAdE,WACf,OACE,yBAAKpB,UAAU,WACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,cACb,8BACA,8BACA,mCCsDKqB,G,MAzDH,WAAO,IAAD,EACYC,mBAAS,IADrB,mBACT5B,EADS,KACD6B,EADC,OAEkBD,oBAAS,GAF3B,mBAETE,EAFS,KAEEC,EAFF,KAIVC,EAAY,uCAAG,4CAAAzC,EAAA,6DAAOC,EAAP,+BAAc,GACjCuC,GAAa,GACbF,EAAU,IAFS,SAIXI,EAAYzC,EAAK0C,QAAQ,IAAK,KAJnB,SAKI5C,EAAY2C,GALhB,OAKXjC,EALW,OAMjB6B,EAAU7B,GANO,kDAQjBmC,QAAQC,IAAI,6DARK,QAUnBL,GAAa,GAVM,0DAAH,qDAwBlB,OACE,yBAAKzB,UAAU,OAEb,gCACI,yBAAKA,UAAU,aACb,wBAAIA,UAAU,4CAAd,yBAMN,6BAASA,UAAU,WACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,WACb,kBAAC,EAAD,CAAQO,SAAUmB,IAClB,yBAAK1B,UAAU,oCACZwB,EACG,kBAAC,EAAD,MA1BP9B,EAAOE,KAAI,SAACjB,EAAOoD,GACxB,OACE,yBAAKC,IAAG,gBAAWD,GAAK/B,UAAU,yBAChC,kBAAC,EAAD,CAAOrB,MAAOA,eCtBxBsD,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.82abd170.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'https://api.flickr.com/services/rest/';\r\n\r\nconst DEFAULT_PARAMS = {\r\n  api_key: process.env.REACT_APP_FLICKR_API_KEY,\r\n  safe_search: 1,\r\n  per_page: 12,\r\n  format: 'json',\r\n  nojsoncallback: 1,\r\n  extras: 'tag'\r\n};\r\n\r\nconst getPhotoURL = (photo) => {\r\n  const {\r\n    id,\r\n    farm,\r\n    secret,\r\n    server\r\n  } = photo;\r\n\r\n  return `https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`;\r\n}\r\n\r\n\r\nexport const fetchPhotos = async (tags = '') => {\r\n\r\n  const method = 'flickr.photos.search';\r\n\r\n  const params = {\r\n    ...DEFAULT_PARAMS,\r\n    method,\r\n    tags\r\n  };\r\n  \r\n  return axios\r\n    .get(API_URL, { params })\r\n    .then(({ data }) => {\r\n\r\n      if (data.stat === 'fail' || !data.photos) {\r\n        throw new Error('Flickr request failed.');\r\n      }\r\n\r\n      const photos = data.photos.photo || [];\r\n      \r\n      return photos.map((item) => {\r\n          item.photoURL = getPhotoURL(item);\r\n          return item;\r\n        });\r\n    });\r\n};","import React from 'react';\r\n\r\nimport './Photo.css';\r\n\r\nconst Photo = ({ photo }) => {\r\n  return (\r\n    <div className=\"photo\">\r\n\r\n      <div className=\"photo_headline\">\r\n        <a href={ photo.photoURL } target=\"_blank\">\r\n          <h4 className=\"photo_title has-text-link\">{ photo.title || 'Unknown' }</h4>\r\n        </a>\r\n      </div>\r\n\r\n      <figure>\r\n        <img src={ photo.photoURL || 'https://placekitten.com/460/340' } alt=\"Cat\"/>\r\n      </figure>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Photo;","import React from 'react';\r\nimport debounce from 'lodash.debounce';\r\n\r\nimport './Search.css';\r\n\r\nconst Search = ({ onSearch }) => {\r\n  const inputRef = React.createRef();\r\n  \r\n  const triggerSearch = () => {\r\n    const { value } = inputRef.current;\r\n    value.length > 2 && onSearch(value);\r\n  };\r\n\r\n  const trigger = debounce(triggerSearch, 1000);\r\n  \r\n  return (\r\n    <div className=\"search content\">\r\n      <p className=\"has-text-info\">Find image by tags:</p>\r\n      <div className=\"field\">\r\n        <div className=\"control\">\r\n          <input\r\n            className=\"input search_input\" \r\n            type=\"text\"\r\n            ref={inputRef}\r\n            onChange={trigger}\r\n            placeholder=\" enter search tag ...\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;","import React from 'react';\r\n\r\nimport './Loading.css';\r\n\r\n const Loading = () => {\r\n  return (\r\n    <div className=\"loading\">\r\n      <div className=\"lds-css ng-scope\">\r\n        <div className=\"lds-flickr\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loading;","import React, { useState } from 'react';\n\nimport { fetchPhotos } from '../../services/flickr.service';\nimport Photo from '../Photo/Photo';\nimport Search from '../Search/Search';\nimport Loading from '../Loading/Loading';\nimport './App.css';\n\nconst App = () => {\n  const [photos, setPhotos] = useState([]);  \n  const [isLoading, setIsLoading] = useState(false);\n\n  const searchPhotos = async (tags = '') => {\n    setIsLoading(true);\n    setPhotos([]);\n    try {\n      const tagsParam = tags.replace(' ', ',');\n      const photos = await fetchPhotos(tagsParam);\n      setPhotos(photos);\n    } catch (e) {\n      console.log('Could not retrieve photos. Please check your credentials.');\n    }\n    setIsLoading(false);\n  }\n\n  const renderPhotos = () => {\n    \n    return photos.map((photo, i) => {\n      return (\n        <div key={`photo_${i}`} className=\"column is-one-quarter\">\n          <Photo photo={photo} />\n        </div>\n      );\n    })\n  }\n\n  return (\n    <div className=\"app\">\n\n      <header >          \n          <div className=\"container\">\n            <h2 className=\"title has-text-centered has-text-primary\">\n              Flickr Image Search\n            </h2>\n          </div>\n      </header>\n\n      <section className=\"section\">\n        <div className=\"container\">\n          <div className=\"content\">\n            <Search onSearch={searchPhotos} />\n            <div className=\"photoStream columns is-multiline\">\n              {isLoading\n                ? <Loading />\n                : renderPhotos()\n              }\n            </div>\n          </div>\n        </div>\n      </section>\n      \n    </div>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport '../node_modules/bulma/css/bulma.min.css';\nimport './index.css';\nimport App from './components/App/App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}